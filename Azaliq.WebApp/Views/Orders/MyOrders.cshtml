@model IEnumerable<Azaliq.ViewModels.Order.OrderViewModel>
@{
    ViewData["Title"] = "My Orders";
}

<section class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-dark">🛍️ My Orders</h2>
        <a class="btn btn-pink-glass" asp-controller="Orders" asp-action="History">View History</a>
    </div>

    @if (!Model.Any())
    {
        <div class="alert alert-info glass-bg-pink text-center">
            <strong>No orders yet.</strong> Start exploring our flower collection and make your first purchase.
        </div>
    }
    else
    {
        <div class="row g-4">
            @foreach (var order in Model)
            {
                <div class="col-md-6">
                    <div class="glass-bg-pink p-4 shadow-sm">
                        <div class="glass-header px-3 py-2 mb-3 d-flex justify-content-between align-items-center">
                            <strong class="text-pink-glow">Order #@order.OrderId</strong>
                            <span class="badge
                                @(order.Status switch {
                                    "Pending" => "bg-warning text-dark",
                                    "Processing" => "bg-info text-dark",
                                    "Completed" => "bg-success text-white",
                                    "Cancelled" => "bg-danger text-white",
                                    _ => "bg-secondary text-white"
                                })">
                                @order.Status
                            </span>
                        </div>

                        <p><strong>Date:</strong> @order.OrderDate.ToString("dd MMM yyyy")</p>
                        <p><strong>Total:</strong> @order.TotalAmount.ToString("C")</p>

                        <ul class="list-unstyled mt-3">
                            @foreach (var product in order.Items)
                            {
                                <li class="mb-2 border-bottom pb-2">
                                    <div class="d-flex justify-content-between">
                                        <span>@product.ProductName</span>
                                        <span>@product.Quantity × @product.Price.ToString("C")</span>
                                    </div>
                                </li>
                            }
                        </ul>

                        <div class="text-end mt-3">
                            <a asp-controller="Orders"
                               asp-action="Details"
                               asp-route-id="@order.OrderId"
                               class="btn glass-btn btn-sm">
                                View Details
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</section>

<style>
    .glass-bg-pink {
        background: rgba(255, 255, 255, 0.07);
        backdrop-filter: blur(14px);
        border-radius: 1rem;
        border: 1px solid rgba(255, 192, 203, 0.25);
        color: #1f1f1f;
    }

    .glass-header {
        background: rgba(255, 192, 203, 0.12);
        backdrop-filter: blur(18px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 1rem 1rem 0 0;
        color: #1f1f1f;
    }

    .text-pink-glow {
        color: #ff8fa3 !important;
    }

    .btn-pink-glass {
        background: rgba(255, 192, 203, 0.15);
        color: #1f1f1f;
        border: 1px solid rgba(255, 192, 203, 0.4);
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
    }

    .btn-pink-glass:hover {
        background: rgba(255, 192, 203, 0.3);
        color: black;
        border-color: #ffb6c1;
    }

    .glass-btn {
        background: rgba(255, 192, 203, 0.15);
        color: #1f1f1f;
        border: 1px solid rgba(255, 192, 203, 0.4);
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
        padding: 0.5rem 1.25rem;
        font-weight: 600;
        border-radius: 0.75rem;
        text-decoration: none;
        display: inline-block;
    }

    .glass-btn:hover {
        background: rgba(255, 192, 203, 0.3);
            color: black;
            border-color: #ffb6c1;
            text-decoration: none;
    }

    .alert-info {
        background-color: rgba(173, 216, 230, 0.15);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(173, 216, 230, 0.25);
        color: #1f1f1f;
    }
</style>